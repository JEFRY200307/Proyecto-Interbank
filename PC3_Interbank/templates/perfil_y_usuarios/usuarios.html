{% extends "dashboard_perfil.html" %}
{% load static %}
{% block perfil_content %}
<h4>Usuarios de la Empresa</h4>
<div id="usuarios-lista">
    <!-- Aquí se cargará la lista de usuarios vía JS -->
</div>
<button id="agregarUsuarioBtn" class="btn">Agregar Usuario</button>

<!-- Modal para agregar/editar usuario -->
<div id="usuarioModal" class="modal" style="display:none;">
    <form id="usuarioForm" class="modal-form">
        <input type="hidden" id="usuario_id" name="usuario_id">
        <label>Nombre</label>
        <input type="text" id="nombre" name="nombre" required>
        <label>Correo</label>
        <input type="email" id="correo" name="correo" required>
        <label>Rol</label>
        <select id="rol" name="rol" required>
            <option value="admin">Administrador</option>
            <option value="editor">Editor</option>
            <option value="lector">Lector</option>
        </select>
        <label>Contraseña</label>
        <input type="password" id="password" name="password" autocomplete="new-password">
        <div class="modal-actions">
            <button type="submit" class="btn">Guardar</button>
            <button type="button" id="cerrarModalBtn" class="btn btn-cancel">Cancelar</button>
        </div>
        <div id="usuarioMensaje" class="mensaje"></div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<style>
    /* Usuarios lista */
    #usuarios-lista {
        margin-top: 1.5rem;
    }

    .usuario-item {
        background: #f8f8f8;
        border-radius: 6px;
        padding: 0.8rem 1rem;
        margin-bottom: 0.7rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .usuario-item span {
        font-weight: 500;
        color: #333;
    }

    .usuario-item button {
        margin-left: 0.5rem;
        padding: 0.3rem 0.8rem;
        border: none;
        border-radius: 4px;
        background: #00953b;
        color: #fff;
        cursor: pointer;
        transition: background 0.2s;
    }

    .usuario-item button:hover {
        background: #007a2f;
    }

    .btn-cancel {
        background: #ccc !important;
        color: #333 !important;
    }

    .btn-cancel:hover {
        background: #bbb !important;
    }

    /* Modal */
    .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.25);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }

    .modal-form {
        background: #fff;
        padding: 2rem 2.5rem;
        border-radius: 10px;
        min-width: 320px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
    }

    .modal-form label {
        font-weight: 500;
        color: #00953b;
    }

    .modal-form input,
    .modal-form select {
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
    }

    .modal-actions {
        display: flex;
        gap: 0.7rem;
        margin-top: 0.5rem;
    }

    .mensaje {
        margin-top: 0.7rem;
        padding: 0.5rem;
        border-radius: 5px;
        display: none;
    }

    .mensaje.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .mensaje.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }
</style>
<script src="{% static 'js/usuarios.js' %}"></script>
{% endblock %}